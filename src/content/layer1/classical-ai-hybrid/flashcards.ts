import type { FlashcardDefinition } from "@/types/flashcard";

export const classicalAiHybridFlashcards = [
  {
    id: "ah-fc-1",
    topicId: "classical-ai-hybrid",
    front: "AI×最適化ハイブリッドの3つの主要パターンは？",
    back: "① Predict-then-Optimize: AIで予測→最適化で求解（基本パターン）\n② Smart Predict-then-Optimize: 最適化結果を予測モデルにフィードバック\n③ RL×最適化: 強化学習でアルゴリズム戦略を学習（learn-to-optimize）",
    tags: ["hybrid", "patterns"],
    relatedLessonId: "ah-lesson-1",
  },
  {
    id: "ah-fc-2",
    topicId: "classical-ai-hybrid",
    front: "Predict-then-Optimize パターンの弱点と対策は？",
    back: "弱点: 予測誤差が最適化結果に伝搬する。予測精度と意思決定の質が一致しない。\n対策: ① ロバスト最適化（最悪ケース対応）② 確率的最適化（分布を考慮）③ SPO（意思決定の質を直接最適化）",
    tags: ["hybrid", "predict-optimize"],
    relatedLessonId: "ah-lesson-1",
  },
  {
    id: "ah-fc-3",
    topicId: "classical-ai-hybrid",
    front: "Smart Predict-then-Optimize（SPO）とは？",
    back: "最適化結果を予測モデルの学習にフィードバックし、予測精度ではなく「意思決定の質」を直接最適化する手法。Decision-Focused Learning とも呼ばれる。2017年の Elmachtoub & Grigas が起点。PyEPO、CVXPYLayers で実装可能。",
    tags: ["hybrid", "spo"],
    relatedLessonId: "ah-lesson-1",
  },
  {
    id: "ah-fc-4",
    topicId: "classical-ai-hybrid",
    front: "数理モデル化パイプラインの4ステップは？",
    back: "① 問題の構造化: 変数・目的・制約・パラメータの抽出\n② モデルの選択: LP/MIP/CSP/メタヒューリスティクスの選択\n③ 実装と検証: コーディング、小規模テスト、感度分析\n④ 運用と改善: パフォーマンス監視、パラメータ更新、モデル拡張",
    tags: ["pipeline", "methodology"],
    relatedLessonId: "ah-lesson-2",
  },
  {
    id: "ah-fc-5",
    topicId: "classical-ai-hybrid",
    front: "問題の構造化で抽出すべき4要素は？",
    back: "① 決定変数: 何を決めるのか（配送ルート、生産量、人員配置）\n② 目的関数: 何を最適化するのか（コスト最小化、利益最大化）\n③ 制約条件: どんな制限があるか（予算、容量、法規制）\n④ パラメータ: 何が既知で何が不確実か（固定値 vs 要予測）",
    tags: ["pipeline", "problem-definition"],
    relatedLessonId: "ah-lesson-2",
  },
  {
    id: "ah-fc-6",
    topicId: "classical-ai-hybrid",
    front: "アルゴリズム選択（Algorithm Selection）とは？",
    back: "問題の特徴量（変数の数、制約の種類、密度等）からメタ学習で最適なソルバー・アルゴリズムを自動選択する手法。SATzilla、AutoFolioが先駆的。同じ問題でもソルバーによって性能が桁違いになるため重要。",
    tags: ["pipeline", "meta-learning"],
    relatedLessonId: "ah-lesson-2",
  },
  {
    id: "ah-fc-7",
    topicId: "classical-ai-hybrid",
    front: "フィードバック学習ループの5ステップは？",
    back: "① 予測: MLでパラメータ推定\n② 最適化: 予測値で最適解を計算\n③ 実行: 最適解に基づき意思決定\n④ 観測: 実行結果を記録\n⑤ 学習: 結果からモデルを更新\n→ ①に戻る。このループで継続的にモデルが改善される。",
    tags: ["feedback-loop", "methodology"],
    relatedLessonId: "ah-lesson-3",
  },
  {
    id: "ah-fc-8",
    topicId: "classical-ai-hybrid",
    front: "Thompson Sampling とは？ どう探索と活用をバランスする？",
    back: "各腕の報酬のベイズ事後分布からサンプリングし、最大サンプルの腕を選ぶバンディットアルゴリズム。\n不確実な腕は事後分布の分散が大きい→時々高い値がサンプルされ探索される。確信が高い腕は分散が小さい→安定して活用される。自然にバランスが取れる。",
    tags: ["bandit", "algorithm"],
    relatedLessonId: "ah-lesson-3",
  },
  {
    id: "ah-fc-9",
    topicId: "classical-ai-hybrid",
    front: "RL×最適化の3つの実用パターンは？",
    back: "① RLで方策→最適化で精緻化（大まかな分割+精密なルーティング）\n② RLでメタヒューリスティクスのパラメータ動的調整（冷却率等）\n③ learn-to-branch: MIPソルバーの分枝戦略をRLで学習（変数選択・ノード選択）",
    tags: ["rl", "hybrid"],
    relatedLessonId: "ah-lesson-3",
  },
  {
    id: "ah-fc-10",
    topicId: "classical-ai-hybrid",
    front: "Layer 1 の全体像: 計算設計フレームワークの4層は？",
    back: "① 問題分類（計算量理論）: P/NP/NP完全の判定\n② 手法選択（数理最適化）: LP/MIP/CSP/メタヒューリスティクス\n③ ツール実装（最適化ツール）: OR-Tools/PuLP/CVXPY\n④ AI統合（ハイブリッド設計）: 予測モデル+フィードバック\nこれが量子コンピュータ（Layer 2）とビジネス応用（Layer 3）の土台。",
    tags: ["overview", "framework"],
    relatedLessonId: "ah-lesson-3",
  },
] as const satisfies readonly FlashcardDefinition[];
