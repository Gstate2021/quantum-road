import type { FlashcardDefinition } from "@/types/flashcard";

export const mathematicalOptimizationFlashcards = [
  {
    id: "mo-fc-1",
    topicId: "mathematical-optimization",
    front: "線形計画法（LP）の標準形を述べよ",
    back: "maximize c^T x  subject to  Ax ≤ b, x ≥ 0\n決定変数 x、目的関数係数 c、制約行列 A、制約右辺 b。すべて線形。最適解は実行可能領域（凸多面体）の頂点に存在する。",
    tags: ["lp", "fundamentals"],
    relatedLessonId: "mo-lesson-1",
  },
  {
    id: "mo-fc-2",
    topicId: "mathematical-optimization",
    front: "シャドウプライス（Shadow Price）とは？",
    back: "LPの双対変数の値。制約の右辺値を1単位緩和したときの目的関数の限界改善量。リソース投資の意思決定に直結する情報で、双対変数が大きい制約のリソースを優先的に確保すべき。",
    tags: ["lp", "duality"],
    relatedLessonId: "mo-lesson-1",
  },
  {
    id: "mo-fc-3",
    topicId: "mathematical-optimization",
    front: "強双対性定理とは？",
    back: "主問題（Primal）と双対問題（Dual）の最適値が一致するという定理。主問題が最大化なら双対は最小化。LP、凸最適化で成り立つ。整数計画法では一般に成り立たない（双対ギャップが生じる）。",
    tags: ["lp", "duality", "theorem"],
    relatedLessonId: "mo-lesson-1",
  },
  {
    id: "mo-fc-4",
    topicId: "mathematical-optimization",
    front: "LP/IP/MIPの違いは？",
    back: "LP: すべての変数が連続（多項式時間で解ける）\nIP: すべての変数が整数（NP困難）\nMIP: 一部が整数、残りが連続（NP困難）\n整数制約の追加だけで問題の難しさが劇的に変わる。",
    tags: ["ip", "classification"],
    relatedLessonId: "mo-lesson-2",
  },
  {
    id: "mo-fc-5",
    topicId: "mathematical-optimization",
    front: "分枝限定法（Branch and Bound）の3ステップは？",
    back: "① LP緩和: 整数制約を外してLPを解く（上界取得）\n② 分枝: 整数でない変数で2つの部分問題に分割（≤⌊x⌋ と ≥⌈x⌉）\n③ 限定: LP緩和値が既知解以下の枝を刈る\nこれを再帰的に繰り返す。",
    tags: ["ip", "algorithm"],
    relatedLessonId: "mo-lesson-2",
  },
  {
    id: "mo-fc-6",
    topicId: "mathematical-optimization",
    front: "緩和ギャップ（Integrality Gap）とは？ なぜ重要？",
    back: "LP緩和の最適値と整数最適値の差。ギャップが小さい定式化ほど分枝限定法の枝刈りが効率的になり、求解時間が桁違いに短縮される。同じ問題でもモデリング次第でギャップが変わる。",
    tags: ["ip", "modeling"],
    relatedLessonId: "mo-lesson-2",
  },
  {
    id: "mo-fc-7",
    topicId: "mathematical-optimization",
    front: "制約充足問題（CSP）の3要素は？",
    back: "① 変数 X = {x₁, ..., xₙ}\n② ドメイン D = {D₁, ..., Dₙ}（各変数の取りうる値）\n③ 制約 C = {c₁, ..., cₘ}（変数間の関係）\n目的関数はなく、すべての制約を満たす解を探す。",
    tags: ["csp", "fundamentals"],
    relatedLessonId: "mo-lesson-3",
  },
  {
    id: "mo-fc-8",
    topicId: "mathematical-optimization",
    front: "制約伝搬（Constraint Propagation）とは？",
    back: "ある変数を割り当てた際、その情報を他の変数のドメインに伝搬させ、矛盾する値を除去する技法。探索空間を大幅に削減する。アーク整合性（AC-3アルゴリズム）が代表的。",
    tags: ["csp", "technique"],
    relatedLessonId: "mo-lesson-3",
  },
  {
    id: "mo-fc-9",
    topicId: "mathematical-optimization",
    front: "MRV（Minimum Remaining Values）ヒューリスティクスとは？",
    back: "CSPのバックトラッキングで、ドメインサイズが最小の変数を優先的に割り当てる戦略。「失敗優先（fail-first）」の原則に基づき、矛盾を早期発見して無駄な探索を削減する。",
    tags: ["csp", "heuristic"],
    relatedLessonId: "mo-lesson-3",
  },
  {
    id: "mo-fc-10",
    topicId: "mathematical-optimization",
    front: "メタヒューリスティクスの特徴を3つ挙げよ",
    back: "① 問題非依存の汎用フレームワーク\n② 厳密解・近似比の数学的保証なし\n③ NP困難な大規模問題に実用的な品質の解を現実時間で提供\n探索と活用のバランスが設計の核心。",
    tags: ["metaheuristic", "fundamentals"],
    relatedLessonId: "mo-lesson-4",
  },
  {
    id: "mo-fc-11",
    topicId: "mathematical-optimization",
    front: "焼きなまし法（Simulated Annealing）の核心メカニズムは？",
    back: "温度Tで探索/活用を制御。高温→悪化も受容（広範囲探索）、低温→良化のみ受容（精密探索）。受容確率: exp(-ΔE/T)。温度スケジュール（冷却率）の設計が性能を決定する。",
    tags: ["metaheuristic", "algorithm"],
    relatedLessonId: "mo-lesson-4",
  },
  {
    id: "mo-fc-12",
    topicId: "mathematical-optimization",
    front: "遺伝的アルゴリズム（GA）の5ステップは？",
    back: "① 初期集団のランダム生成\n② 適応度評価（目的関数計算）\n③ 選択（適応度が高い個体を親に）\n④ 交叉（親の特徴を組み合わせて子を生成）\n⑤ 突然変異（低確率でランダム変化）\n世代交代を繰り返す。",
    tags: ["metaheuristic", "algorithm"],
    relatedLessonId: "mo-lesson-4",
  },
  {
    id: "mo-fc-13",
    topicId: "mathematical-optimization",
    front: "探索（Exploration）と活用（Exploitation）のトレードオフとは？",
    back: "探索: 解空間を広く調べ、局所最適解から脱出する\n活用: 良い解の近傍を集中探索し、解の品質を上げる\nメタヒューリスティクスの設計はこのバランスに帰結する。探索不足→局所最適に陥る、活用不足→良い解を逃す。",
    tags: ["metaheuristic", "concept"],
    relatedLessonId: "mo-lesson-4",
  },
  {
    id: "mo-fc-14",
    topicId: "mathematical-optimization",
    front: "焼きなまし法と量子アニーリングの関係は？",
    back: "量子アニーリングは焼きなまし法の量子版。古典的な熱揺らぎの代わりに量子揺らぎ（トンネル効果）を利用してエネルギー障壁を超える。D-Waveの量子コンピュータが量子アニーリングを実装している。Layer 3で詳しく学ぶ。",
    tags: ["metaheuristic", "quantum"],
    relatedLessonId: "mo-lesson-4",
  },
  {
    id: "mo-fc-15",
    topicId: "mathematical-optimization",
    front: "最適化手法の選択指針: LP → IP → メタヒューリスティクスの使い分けは？",
    back: "① LPで解ける → LP（多項式時間、厳密解）\n② 整数制約が必要 → IP/MIP（指数時間だが中規模なら実用的）\n③ 大規模 or 定式化困難 → メタヒューリスティクス（解品質保証なし、実用的）\n問題の構造を見極め、最もシンプルな手法から試す。",
    tags: ["strategy", "decision"],
    relatedLessonId: "mo-lesson-4",
  },
] as const satisfies readonly FlashcardDefinition[];
