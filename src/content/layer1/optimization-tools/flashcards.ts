import type { FlashcardDefinition } from "@/types/flashcard";

export const optimizationToolsFlashcards = [
  {
    id: "ot-fc-1",
    topicId: "optimization-tools",
    front: "OR-Tools に含まれる主要なソルバーを4つ挙げよ",
    back: "① GLOP: LPソルバー\n② CP-SAT: 制約プログラミング＋SATソルバー（整数変数）\n③ SCIP: MIPソルバー\n④ RoutingModel: VRP（配車問題）専用エンジン\nすべてオープンソース、商用利用無料。",
    tags: ["or-tools", "overview"],
    relatedLessonId: "ot-lesson-1",
  },
  {
    id: "ot-fc-2",
    topicId: "optimization-tools",
    front: "CP-SAT ソルバーの得意分野は？",
    back: "整数変数の制約充足・最適化問題。特にスケジューリング（シフト作成、ジョブショップ）、割当問題、時間割作成に強い。ブール変数、含意制約（Implication）、AllDifferent等の高レベル制約をネイティブサポート。",
    tags: ["or-tools", "cp-sat"],
    relatedLessonId: "ot-lesson-1",
  },
  {
    id: "ot-fc-3",
    topicId: "optimization-tools",
    front: "VRP（Vehicle Routing Problem）とは？ OR-ToolsではどうSolveする？",
    back: "複数の車両で複数の顧客を訪問する最適ルートを求めるNP困難問題。OR-ToolsではRoutingModel + RoutingIndexManagerを使い、距離コールバック・容量制約・時間枠制約を設定してGLSなどのメタヒューリスティクスで解く。",
    tags: ["or-tools", "vrp"],
    relatedLessonId: "ot-lesson-1",
  },
  {
    id: "ot-fc-4",
    topicId: "optimization-tools",
    front: "PuLP とは何か？ その主な強みは？",
    back: "PythonのLP/MIPモデリングライブラリ。\n強み: ① 数式に近い自然な記法（prob += lpSum(...)）\n② CBC, GLPK, Gurobi等の外部ソルバーを呼び出し可能\n③ 学習コストが低くプロトタイプに最適\n④ 商用ソルバーへの切り替えが容易",
    tags: ["pulp", "overview"],
    relatedLessonId: "ot-lesson-2",
  },
  {
    id: "ot-fc-5",
    topicId: "optimization-tools",
    front: "PuLP でシャドウプライスを取得するコードは？",
    back: "prob.constraints['制約名'].pi\n返り値は双対変数の値。制約のRHSを1単位緩和したときの目的関数の改善量を表す。リソース投資の優先順位決定に直結する情報。",
    tags: ["pulp", "duality"],
    relatedLessonId: "ot-lesson-2",
  },
  {
    id: "ot-fc-6",
    topicId: "optimization-tools",
    front: "CBC（COIN-OR Branch and Cut）とは？",
    back: "オープンソースのMIPソルバー。PuLPのデフォルトソルバー。分枝限定法＋切除平面法を組み合わせた手法。商用ソルバー（Gurobi, CPLEX）には性能で劣るが、中規模問題なら十分実用的。無料で使える点が大きなメリット。",
    tags: ["solver", "cbc"],
    relatedLessonId: "ot-lesson-2",
  },
  {
    id: "ot-fc-7",
    topicId: "optimization-tools",
    front: "CVXPY とは？ PuLP との主な違いは？",
    back: "凸最適化のPythonモデリングフレームワーク。\nPuLPとの違い:\n① LP/MIPだけでなくQP, SOCP, SDPなど凸最適化全般を扱える\n② DCP規則で凸性を自動検証\n③ ポートフォリオ最適化（二次）やロバスト最適化（錐）に対応\n④ 整数変数のサポートは限定的",
    tags: ["cvxpy", "overview"],
    relatedLessonId: "ot-lesson-3",
  },
  {
    id: "ot-fc-8",
    topicId: "optimization-tools",
    front: "DCP（Disciplined Convex Programming）規則とは？",
    back: "CVXPYの凸性自動検証システム。目的関数と制約が凸性の条件を満たすかをコンパイル時にチェック。違反するとエラー。\n基本ルール: 凸関数の最小化 or 凹関数の最大化、制約は凸 ≤ 凹。\n非凸問題の定式化ミスを早期発見できる。",
    tags: ["cvxpy", "dcp"],
    relatedLessonId: "ot-lesson-3",
  },
  {
    id: "ot-fc-9",
    topicId: "optimization-tools",
    front: "最適化ツールの選択指針: PuLP / OR-Tools / CVXPY の使い分けは？",
    back: "PuLP: LP/MIPの定式化（可読性重視、プロトタイプ）\nOR-Tools: VRP、スケジューリング、CSP（専用ソルバーの強み）\nCVXPY: 凸最適化全般（QP、SOCP、SDP）\n\n「まずPuLPでプロトタイプ → 性能不足ならOR-Tools or 商用ソルバー」が実務フロー。",
    tags: ["strategy", "selection"],
    relatedLessonId: "ot-lesson-3",
  },
  {
    id: "ot-fc-10",
    topicId: "optimization-tools",
    front: "商用ソルバー（Gurobi, CPLEX）と OSS ソルバー（CBC, GLOP）の違いは？",
    back: "商用ソルバー: 大規模MIP（変数10万以上）で桁違いに速い。前処理・カット生成・並列化が高度。年間ライセンス数百万円。\nOSSソルバー: 中規模（変数数千）までなら実用的。無料。学術・プロトタイプに最適。\n規模と予算で使い分ける。",
    tags: ["solver", "comparison"],
    relatedLessonId: "ot-lesson-3",
  },
] as const satisfies readonly FlashcardDefinition[];
