import type { FlashcardDefinition } from "@/types/flashcard";

export const hybridDesignFlashcards: readonly FlashcardDefinition[] = [
  {
    id: "hd-fc1",
    topicId: "hybrid-design",
    front: "ハイブリッドアーキテクチャの3段パイプラインとは？",
    back: "1. 古典前処理: データ整形、問題定式化（QUBO等）、次元削減、初期パラメータ計算\n2. 量子コア: 量子回路実行、測定、期待値推定\n3. 古典後処理: 結果解釈、パラメータ更新、誤り緩和、ビジネスロジック\n\n量子は「得意な部分だけ」担当し、それ以外は古典が処理する。",
    tags: ["architecture", "pipeline", "hybrid"],
    relatedLessonId: "hd-lesson-1",
  },
  {
    id: "hd-fc2",
    topicId: "hybrid-design",
    front: "QUBO（二次無制約二値最適化）とは？",
    back: "Quadratic Unconstrained Binary Optimization。\n組合せ最適化問題をバイナリ変数 x ∈ {0,1}ⁿ の二次形式 x^T Q x として定式化する手法。\n\nQAOA、量子アニーリングへの入力形式として標準的。ポートフォリオ最適化、スケジューリング、グラフ問題等を変換可能。\n\n古典前処理フェーズでビジネス問題→QUBOに変換する。",
    tags: ["QUBO", "optimization", "formulation"],
    relatedLessonId: "hd-lesson-1",
  },
  {
    id: "hd-fc3",
    topicId: "hybrid-design",
    front: "4つのハイブリッド設計パターンとは？",
    back: "1. Variational Loop（変分ループ）: 古典⇄量子を収束まで反復。VQE, QAOA。NISQ主流。\n2. Quantum Subroutine: 古典アルゴリズム内で量子を関数呼び出し。Shor等。\n3. Quantum-Inspired: 量子アイデアを古典で近似。テンソルネットワーク等。HW不要。\n4. Embedding: 大問題を分割しサブ問題を量子で解く。量子ビット数制約の回避。",
    tags: ["patterns", "design", "overview"],
    relatedLessonId: "hd-lesson-2",
  },
  {
    id: "hd-fc4",
    topicId: "hybrid-design",
    front: "パラメータシフト則とは？",
    back: "変分量子回路の解析的勾配計算法。\n\n∂C/∂θᵢ = [C(θᵢ+π/2) - C(θᵢ-π/2)] / 2\n\n1パラメータにつき2回の回路実行。n個のパラメータの勾配には2n回の実行。\n有限差分法より精度が高い。量子ハードウェア上で直接勾配を計算可能。\n\n課題: パラメータ数に比例してコストが増大。ショットノイズの影響。",
    tags: ["gradient", "parameter-shift", "optimization"],
    relatedLessonId: "hd-lesson-2",
  },
  {
    id: "hd-fc5",
    topicId: "hybrid-design",
    front: "誤り緩和（Error Mitigation）の主な手法は？",
    back: "ZNE（Zero-Noise Extrapolation）: 複数ノイズレベルで実行→ゼロへ外挿\nPEC（Probabilistic Error Cancellation）: ノイズチャネルの逆操作を確率的に適用\nM3（Matrix-free Measurement Mitigation）: 測定誤りの補正\nDD（Dynamical Decoupling）: パルス列でノイズを抑制\n\n誤り訂正（追加量子ビット必要）とは異なり、古典後処理で実行可能。NISQの救世主。",
    tags: ["error-mitigation", "ZNE", "PEC"],
    relatedLessonId: "hd-lesson-2",
  },
  {
    id: "hd-fc6",
    topicId: "hybrid-design",
    front: "ハイブリッドワークロードの4つのコスト要素は？",
    back: "1. QPU時間コスト: 量子プロセッサ使用料金（クラウド課金、~$1-2/秒）\n2. 回路実行回数: ショット数 × パラメータ更新回数 × 勾配計算\n3. 古典オーバーヘッド: 前処理・後処理の計算時間\n4. 通信レイテンシ: 古典→量子→古典のラウンドトリップ（50-200ms/回）\n\n多くの場合、通信レイテンシが支配的なボトルネック。",
    tags: ["cost", "resource", "QPU"],
    relatedLessonId: "hd-lesson-3",
  },
  {
    id: "hd-fc7",
    topicId: "hybrid-design",
    front: "量子 vs 古典の適材適所は？",
    back: "量子が得意:\n- 指数的状態空間の探索（組合せ最適化）\n- 量子系シミュレーション（化学、材料）\n- 特定構造（周期発見、探索）\n\n古典が得意:\n- データ前処理・変換\n- 大規模I/O\n- 反復計算の制御\n- 結果解釈・可視化\n\n→ 量子は「高価な専門家」。できるだけ少なく使い、最大効果を得る。",
    tags: ["quantum-vs-classical", "resource-allocation"],
    relatedLessonId: "hd-lesson-3",
  },
  {
    id: "hd-fc8",
    topicId: "hybrid-design",
    front: "量子実用優位性（Quantum Utility）とは？",
    back: "量子コンピュータが古典コンピュータより「実用的に」優れた結果を出せる領域。\n\n量子超越性（Quantum Supremacy）: 任意のタスクで古典を超える → 2019年Googleが主張\n量子実用優位性: 実用的な問題で古典を上回る → まだ明確に確立されていない\n\n現状: ほとんどのビジネス問題で古典が優位。しかしハイブリッド設計スキルは将来への必須準備。",
    tags: ["quantum-utility", "advantage"],
    relatedLessonId: "hd-lesson-3",
  },
  {
    id: "hd-fc9",
    topicId: "hybrid-design",
    front: "ハイブリッド設計のコンサルティング判断フローは？",
    back: "1. 問題の定式化: ビジネス課題→数理最適化問題\n2. 古典ベースライン: SA/GA/CPLEX等で解く\n3. 量子適合性評価:\n   - 問題サイズ vs 量子ビット数\n   - 精度要件 vs ノイズレベル\n   - 古典近似解 vs 量子期待品質\n4. PoC設計: 小規模でパイプライン構築\n5. スケーリング評価: 拡大時のリソース見積もり\n\n誠実に「今は古典が優位」と伝えつつ、将来準備の価値を説く。",
    tags: ["consulting", "decision-flow"],
    relatedLessonId: "hd-lesson-3",
  },
  {
    id: "hd-fc10",
    topicId: "hybrid-design",
    front: "ショット（Shot）とは？なぜ必要か？",
    back: "量子回路の1回の実行と測定。\n\n量子力学の確率的性質により、同じ回路でも毎回異なる結果が得られる。確率振幅の二乗に従って結果が分布するため、何千回も実行して統計的に期待値を推定する必要がある。\n\nショット数↑ → 推定精度↑ だが QPU時間コスト↑\n典型的なショット数: 1,024〜8,192回/評価",
    tags: ["shots", "measurement", "statistics"],
    relatedLessonId: "hd-lesson-1",
  },
] as const satisfies readonly FlashcardDefinition[];
